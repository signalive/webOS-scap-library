cordova.define("cordova/plugin/video",function(e,t,o){function r(e){console.log(e)}function i(e,t,o){(void 0===e.errorCode||null===e.errorCode)&&(e.errorCode=t),(void 0===e.errorText||null===e.errorText)&&(e.errorText=o)}var n;window.PalmSystem?(r("Window.PalmSystem Available"),n=e("cordova/plugin/webos/service")):n={Request:function(e,t){r(e+" invoked. But I am a dummy because PalmSystem is not available"),"function"==typeof t.onFailure&&t.onFailure({returnValue:!1,errorText:"PalmSystem Not Available. Cordova is not installed?"})}};var u=function(){};u.prototype.getVideoStatus=function(e,t){r("getVideoStatus: "),n.Request("luna://com.webos.service.tv.signage/",{method:"getVideoSize",onSuccess:function(t){if(r("getVideoStatus: On Success"),t.returnValue===!0&&e&&"function"==typeof e){var o={};o.source=t.videoSize.source,e(o)}},onFailure:function(e){r("getVideoStatus: On Failure"),delete e.returnValue,t&&"function"==typeof t&&(i(e,"VGVS","Video.getVideoStatus returns failure."),t(e))}}),r("Video.getVideoStatus Done")},u.currentVideo={uri:null,source:null,tagId:null},u.prototype.setVideoSize=function(e,t,o){if(r("setVideoSize: "+JSON.stringify(o)),void 0===o.source||"number"!=typeof o.source.x||"number"!=typeof o.source.y||"number"!=typeof o.source.width||"number"!=typeof o.source.height||isNaN(o.source.x)||isNaN(o.source.y)||isNaN(o.source.width)||isNaN(o.source.height)||o.source.x<0||o.source.y<0||o.source.width<=0||o.source.height<=0){if(t&&"function"==typeof t){var d={};i(d,"VSVS","Video.setVideoSize returns failure. out of range or type error."),t(d)}}else n.Request("luna://com.webos.service.tv.signage/",{method:"getVideoSize",onSuccess:function(d){if(r("setVideoSize: On Success"),d.returnValue===!0){var s={};s.x=d.videoSize.destination.x,s.y=d.videoSize.destination.y,s.width=d.videoSize.destination.width,s.height=d.videoSize.destination.height;for(var c=document.getElementsByTagName("video"),a=!1,l=0;l<c.length;l++)if(c[l].currentTime>0){a=!0,(u.currentVideo.uri!==c[l].src||null!==c[l].id&&void 0!==c[l].id&&null!==u.currentVideo.tagId&&void 0!==u.currentVideo.tagId&&u.currentVideo.tagId!==c[l].id)&&(u.currentVideo.uri=c[l].src,u.currentVideo.source=d.videoSize.source,u.currentVideo.tagId=c[l].id);break}if(a===!1)n.Request("luna://com.webos.service.eim/",{method:"getCurrentInput",parameters:{},onSuccess:function(d){if(d.returnValue===!0&&u.currentVideo.uri!==d.mainInputSourceId||null!==c[0].id&&void 0!==c[0].id&&null!==u.currentVideo.tagId&&void 0!==u.currentVideo.tagId&&u.currentVideo.tagId!==c[0].id)u.currentVideo.uri=d.mainInputSourceId,u.currentVideo.tagId=null!==c[0]&&null!==c[0].id&&void 0!==c[0].id?c[0].id:null,n.Request("luna://com.webos.service.tv.signage/",{method:"getVideoSize",onSuccess:function(d){if(r("setVideoSize: On Success 1"),d.returnValue===!0){if(u.currentVideo.source=d.videoSize.source,0===d.videoSize.source.width&&0===d.videoSize.source.height){u.currentVideo={uri:null,source:null,tagId:null};var c={};return i(c,"VSVS","Video.setVideoSize returns failure. Not ready to setVideoSize."),void t(c)}if(null===u.currentVideo.uri||null===u.currentVideo.source||o.source.width+o.source.x>u.currentVideo.source.x+u.currentVideo.source.width||o.source.height+o.source.y>u.currentVideo.source.y+u.currentVideo.source.height){var a={};return i(a,"VSVS","Video.setVideoSize returns failure. out of range or type error. ("+u.currentVideo.source.width+" : "+u.currentVideo.source.height+")"),void t(a)}n.Request("luna://com.webos.service.tv.signage/",{method:"setVideoSize",parameters:{videoSize:{source:{x:o.source.x,y:o.source.y,width:o.source.width,height:o.source.height},destination:{x:s.x,y:s.y,width:s.width,height:s.height}}},onSuccess:function(t){return r("setVideoSize: On Success 2"),t.returnValue===!0&&e&&"function"==typeof e?void e():void 0},onFailure:function(e){return r("setVideoSize: On Failure 2"),delete e.returnValue,t&&"function"==typeof t?(i(e,"VSVS","Video.setVideoSize returns failure. Can't current video source size."),void t(e)):void 0}})}}});else{if(null===u.currentVideo.uri||null===u.currentVideo.source||o.source.width+o.source.x>u.currentVideo.source.x+u.currentVideo.source.width||o.source.height+o.source.y>u.currentVideo.source.y+u.currentVideo.source.height){var a={};return i(a,"VSVS","Video.setVideoSize returns failure. out of range or type error. ("+u.currentVideo.source.width+" : "+u.currentVideo.source.height+")"),void t(a)}n.Request("luna://com.webos.service.tv.signage/",{method:"setVideoSize",parameters:{videoSize:{source:{x:o.source.x,y:o.source.y,width:o.source.width,height:o.source.height},destination:{x:s.x,y:s.y,width:s.width,height:s.height}}},onSuccess:function(t){return r("setVideoSize: On Success 3"),t.returnValue===!0&&e&&"function"==typeof e?void e():void 0},onFailure:function(e){return r("setVideoSize: On Failure 3"),delete e.returnValue,t&&"function"==typeof t?(i(e,"VSVS","Video.setVideoSize returns failure. Can't current video source size."),void t(e)):void 0}})}},onFailure:function(){}});else{if(null===u.currentVideo.uri||null===u.currentVideo.source||o.source.width+o.source.x>u.currentVideo.source.x+u.currentVideo.source.width||o.source.height+o.source.y>u.currentVideo.source.y+u.currentVideo.source.height){var V={};return i(V,"VSVS","Video.setVideoSize returns failure. out of range or type error. ("+u.currentVideo.source.width+" : "+u.currentVideo.source.height+")"),void t(V)}n.Request("luna://com.webos.service.tv.signage/",{method:"setVideoSize",parameters:{videoSize:{source:{x:o.source.x,y:o.source.y,width:o.source.width,height:o.source.height},destination:{x:s.x,y:s.y,width:s.width,height:s.height}}},onSuccess:function(t){return r("setVideoSize: On Success 4"),t.returnValue===!0&&e&&"function"==typeof e?void e():void 0},onFailure:function(e){return r("setVideoSize: On Failure 4"),delete e.returnValue,t&&"function"==typeof t?(i(e,"VSVS","Video.setVideoSize returns failure. Can't current video source size."),void t(e)):void 0}})}}},onFailure:function(e){return r("setVideoSize: On Failure"),delete e.returnValue,t&&"function"==typeof t?(i(e,"VSVS","Video.setVideoSize returns failure."),void t(e)):void 0}}),r("Video.setVideoSize Done")},u.prototype.setContentRotation=function(e,t,o){r("setContentRotation: "),("undefined"==typeof o||null===o||"off"!==o.degree&&"90"!==o.degree&&"270"!==o.degree||"full"!==o.aspectRatio&&"original"!=o.aspectRatio)&&i(result,"VSCR","Video.setContentRotation invlalid parameters."),n.Request("luna://com.webos.service.commercial.signage.storageservice/video/",{method:"setContentRotation",parameters:o,onSuccess:function(t){return r("setContentRotation: On Success"),t.returnValue===!0&&e&&"function"==typeof e?void e():void 0},onFailure:function(e){return r("setContentRotation: On Failure"),delete e.returnValue,t&&"function"==typeof t?(i(e,"VSCR","Video.setContentRotation returns failure."),void t(e)):void 0}}),r("Video.setContentRotation: Done ")},u.prototype.getContentRotation=function(e,t){r("getContentRotation: "),n.Request("luna://com.webos.service.commercial.signage.storageservice/video/",{method:"getContentRotation",onSuccess:function(t){r("getContentRotation: On Success"),t.returnValue===!0&&e&&"function"==typeof e&&e(t)},onFailure:function(e){r("getContentRotation: On Failure"),delete e.returnValue,t&&"function"==typeof t&&(i(e,"VGCR","Video.getContentRotation returns failure."),t(e))}}),r("Video.getContentRotation Done")},u.prototype.setRotatedVideoTransform=function(e,t,o){("number"!=typeof o.x||"number"!=typeof o.y||"number"!=typeof o.width||"number"!=typeof o.height)&&t({errorCode:"VSVT",errorText:"Invalid Parameter type."}),n.Request("luna://com.webos.service.commercial.signage.storageservice/video/",{method:"getContentRotation",onSuccess:function(r){var i,u,d,s;return"off"===r.degree?void t({errorCode:"VSVT",errorText:"Content must be applied content rotation first."}):("90"===r.degree?(i=1920-(o.y+o.height),u=o.x,d=o.height,s=o.width):"270"===r.degree&&(i=o.y,u=1080-(o.x+o.width),d=o.height,s=o.width),void n.Request("luna://com.webos.service.commercial.signage.storageservice/video/",{method:"getMediaID",onSuccess:function(o){if(o.returnValue===!0){var r=o.id;n.Request("luna://com.webos.service.tv.display/",{method:"setRotateDisplayWindow",parameters:{context:r,fullScreen:!1,displayOutput:{positionX:i,positionY:u,width:d,height:s}},onSuccess:function(o){o.returnValue===!0?e&&"function"==typeof e&&(delete o.returnValue,e(o)):(delete o.returnValue,t&&"function"==typeof t&&t({errorCode:"VSVT",errorText:"Failed to set rotated video transform"}))},onFailure:function(e){delete e.returnValue,t&&"function"==typeof t&&t({errorCode:"VSVT",errorText:"Failed to set rotated video transform"})}})}},onFailure:function(e){delete e.returnValue,t&&"function"==typeof t&&t({errorCode:"VSVT",errorText:"Cannot found video area"})}}))},onFailure:function(e){r("getContentRotation: On Failure"),delete e.returnValue,t&&"function"==typeof t&&(i(e,"VGCR","Video.getContentRotation returns failure."),t(e))}})},u.prototype.setVideoViewTransform=function(e,t,o){("number"!=typeof o.x||"number"!=typeof o.y||"number"!=typeof o.width||"number"!=typeof o.height)&&t({errorCode:"VSVT",errorText:"Invalid Parameter type."}),n.Request("luna://com.webos.service.commercial.signage.storageservice/video/",{method:"getMediaID",onSuccess:function(r){if(r.returnValue===!0){var i=r.id;n.Request("luna://com.webos.service.tv.display/",{method:"setCustomDisplayWindow",parameters:{context:i,sourceInput:{positionX:0,positionY:0,width:1920,height:1080},displayOutput:{positionX:o.x,positionY:o.y,width:o.width,height:o.height}},onSuccess:function(o){o.returnValue===!0?e&&"function"==typeof e&&(delete o.returnValue,e(o)):(delete o.returnValue,t&&"function"==typeof t&&t({errorCode:"VSVT",errorText:"Failed to set video view transform"}))},onFailure:function(e){delete e.returnValue,t&&"function"==typeof t&&t({errorCode:"VSVT",errorText:"Failed to set video view transform"})}})}},onFailure:function(e){delete e.returnValue,t&&"function"==typeof t&&t({errorCode:"VSVT",errorText:"Cannot found video area"})}})},o.exports=u}),Video=cordova.require("cordova/plugin/video");