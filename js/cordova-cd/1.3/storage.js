cordova.define("cordova/plugin/storage",function(c,b,d){var a;function e(h){}if(window.PalmSystem){e("Window.PalmSystem Available");a=c("cordova/plugin/webos/service")}else{a={Request:function(h,i){e(h+" invoked. But I am a dummy because PalmSystem is not available");if(typeof i.onFailure==="function"){i.onFailure({returnValue:false,errorText:"PalmSystem Not Available. Cordova is not installed?"})}}}}function g(k){if(k){if(k.length>256){e("URI IS TOO LONG!!!!!!!! "+k.length);return false}else{var i=k.substring(k.indexOf("://")+"://".length);var l=i.substring(i.indexOf("/"));var j=new RegExp(/^[a-zA-Z0-9-_\/\.]*$/g);var h=j.exec(l);if(h){e("GOOD URI!!!!!!!! ");return true}else{e("INVALID URI!!!!!!!! "+k);return false}}}else{e("NO URI!!!!!!!! "+k);return false}}var f=function(){};Error.ERROR_CODE={IO_ERROR:"IO_ERROR",DEVICE_ERROR:"DEVICE_ERROR",BAD_PARAMETER:"BAD_PARAMETER",SERVER_ERROR:"SERVER_ERROR",NETWORK_ERROR:"NETWORK_ERROR",NETWORK_ERROR:"NETWORK_ERROR",SYSTEM_ERROR:"SYSTEM_ERROR",};f.SCAP_URI="";f.MAX_BUFFER_LENGTH=1024*10;f.AppMode={USB:"usb",LOCAL:"local"};f.prototype.downloadFirmware=function(h,i,j){a.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"downloadFirmware",parameters:{uri:j.uri},onSuccess:function(k){if(k.returnValue===true){h()}else{i({errorCode:k.errorCode,errorText:k.errorText})}},onFailure:function(k){i({errorCode:k.errorCode,errorText:k.errorText})}})};f.prototype.upgradeFirmware=function(h,i){a.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"upgradeFirmware",parameters:{},onSuccess:function(j){if(j.returnValue===true){h()}else{i({errorCode:j.errorCode,errorText:j.errorText})}},onFailure:function(j){i({errorCode:j.errorCode,errorText:j.errorText})}})};f.prototype.getFirmwareUpgradeStatus=function(h,i){a.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"getFirmwareUpgradeStatus",parameters:{},onSuccess:function(j){if(j.returnValue===true){h({status:j.status,upgradeProgress:j.upgradeProgress,downloadProgress:j.downloadProgress})}else{i({errorCode:j.errorCode,errorText:j.errorText})}},onFailure:function(j){i({errorCode:j.errorCode,errorText:j.errorText})}})};f.prototype.changeLogoImage=function(h,i,j){a.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"changeLogoImage",parameters:{uri:j.uri},onSuccess:function(k){if(k.returnValue===true){h()}else{i({errorCode:k.errorCode,errorText:k.errorText})}},onFailure:function(k){i({errorCode:k.errorCode,errorText:k.errorText})}})};f.prototype.upgradeApplication=function(h,i,j){a.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"upgradeApplication",parameters:{from:"remote",to:(j==undefined||j==null?f.AppMode.LOCAL:j.to),recovery:(j==undefined||j==null?false:j.recovery)},onSuccess:function(k){if(k.returnValue===true){setTimeout(function(){h()},3000)}else{i({errorCode:k.errorCode,errorText:k.errorText})}},onFailure:function(k){i({errorCode:k.errorCode,errorText:k.errorText})}})};f.prototype.removeApplication=function(h,i,j){a.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"removeApplication",parameters:{to:j.to},onSuccess:function(k){if(k.returnValue===true){h()}else{i({errorCode:k.errorCode,errorText:k.errorText})}},onFailure:function(k){i({errorCode:k.errorCode,errorText:k.errorText})}})};f.prototype.copyFile=function(h,i,j){e("Options: "+JSON.stringify(j,null,3));if(j.maxRedirection&&j.maxRedirection>5){e("Bad options TOO MANY REDIRECTION");i({errorCode:"BAD_PARAMETER",errorText:"Redirect cannot be more that 5"});return}if(j.headers&&JSON.stringify(j.headers).length>1024){e("header too long header too long");i({errorCode:"BAD_PARAMETER",errorText:"Header data cannot be bigger than 1K"});return}if(typeof j.httpOption==="undefined"){j.httpOption={}}if(j.httpOption.headers&&JSON.stringify(j.httpOption.headers).length>1024){e("header too long header too long");i({errorCode:"BAD_PARAMETER",errorText:"Header data cannot be bigger than 1K"});return}if(j.maxRedirection||j.headers){if(j.maxRedirection&&typeof j.httpOption.maxRedirection==="undefined"){j.httpOption.maxRedirection=j.maxRedirection}if(j.headers&&typeof j.httpOption.headers==="undefined"){j.httpOption.headers=j.headers}}console.log(j);a.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"fs/copyFile",parameters:{dest:j.destination,src:j.source,ftpOption:j.ftpOption,httpOption:j.httpOption},onSuccess:function(k){if(k.returnValue===true){e("SUCCESS");h()}else{e("Err: "+k.errorText);i({errorCode:k.errorCode,errorText:k.errorText})}},onFailure:function(k){e("Err: "+k.errorText);i({errorCode:k.errorCode,errorText:k.errorText})}})};f.prototype.removeFile=function(h,i,j){if(!(j&&g(j.file))){i({errorCode:"BAD_PARAMETER",errorText:"options.file is a mandatory parameter"});return}var k={file:j.file};if(j.recursive===true){k.recursive=true}a.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"fs/removeFile",parameters:k,onSuccess:function(l){e("onSuccess");if(l.returnValue===true){h()}else{i({errorCode:l.errorCode,errorText:l.errorText})}},onFailure:function(l){e("onFailure");i({errorCode:l.errorCode,errorText:l.errorText})}})};f.prototype.listFiles=function(h,i,j){var k={};if(j&&j.path){if(g(j.path)){k.pathURI=j.path}else{i({errorCode:"BAD_PARAMETER",errorText:"File URI is not valid."});return}}else{k.pathURI="file://internal/"}a.Request("luna://com.webos.service.commercial.signage.storageservice/",{method:"fs/listFiles",parameters:k,onSuccess:function(l){if(l.returnValue===true){var n=[];for(var m=0;m<l.files.length;++m){e(l.files[m]);var p={name:l.files[m].name,type:(l.files[m].type==="folder")?"folder":"file",size:l.files[m].size};n.push(p)}var o={files:n,totalCount:l.totalCount};h(o)}else{i({errorCode:l.errorCode,errorText:l.errorText})}},onFailure:function(l){i({errorCode:l.errorCode,errorText:l.errorText})}})};f.prototype.getStorageInfo=function(h,i){a.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"fs/storageInfo",parameters:{},onSuccess:function(j){e("returned : "+JSON.stringify(j,null,3));if(j.returnValue===true){e("returned : "+JSON.stringify(j,null,3));var k={free:j.spaceInfo.freeSize,total:j.spaceInfo.totalSize,used:j.spaceInfo.usedSize,externalMemory:j.externalStorage};h(k)}else{i({errorCode:j.errorCode,errorText:j.errorText})}},onFailure:function(j){i({errorCode:j.errorCode,errorText:j.errorText})}})};f.prototype.mkdir=function(h,i,j){if(!(j&&g(j.path))){i({errorCode:"BAD_PARAMETER",errorText:"options.path is a mandatory parameter"});return}var k={pathURI:j.path};a.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"fs/mkdir",parameters:k,onSuccess:function(l){e("onSuccess");if(l.returnValue===true){h()}else{i({errorCode:l.errorCode,errorText:l.errorText})}},onFailure:function(l){e("onFailure");i({errorCode:l.errorCode,errorText:l.errorText})}})};f.prototype.exists=function(h,i,j){if(!(j&&g(j.path))){e("BAD_PARAMETER");i({errorCode:"BAD_PARAMETER",errorText:"options.path is a mandatory parameter"});return}var k={pathURI:j.path};a.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"fs/exists",parameters:k,onSuccess:function(l){e("onSuccess");if(l.returnValue===true){e("returned : "+JSON.stringify(l,null,3));var m={exists:l.exists};h(m)}else{i({errorCode:l.errorCode,errorText:l.errorText})}},onFailure:function(l){e("onFailure");i({errorCode:l.errorCode,errorText:l.errorText})}})};f.prototype.readFile=function(h,i,j){if(!j){i({errorCode:"BAD_PARAMETER",errorText:"options.path is a mandatory parameter"})}else{if(!g(j.path)){i({errorCode:"BAD_PARAMETER",errorText:"options.path is a mandatory parameter"})}else{if(j.length&&(j.length>f.MAX_BUFFER_LENGTH||j.length<1)){i({errorCode:"BAD_PARAMETER",errorText:"length should be > 0 and < "+f.MAX_BUFFER_LENGTH})}else{if(j.position&&(j.position<0)){i({errorCode:"BAD_PARAMETER",errorText:"position should be > 0"})}else{var k={};k.path=j.path,k.length=j.length?j.length:f.MAX_BUFFER_LENGTH;k.position=j.position?j.position:0;k.encoding=j.encoding?j.encoding:"utf-8";a.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"fs/readFile",parameters:k,onSuccess:function(l){if(l.returnValue){if(k.encoding==="binary"){var m=l.data;var o=new Uint8Array(m.length);for(var n=0;n<m.length;++n){o[n]=m[n]}h({data:o.buffer})}else{h({data:l.data})}}else{i({errorCode:l.errorCode,errorText:l.errorText})}},onFailure:function(l){i({errorCode:l.errorCode,errorText:l.errorText})}})}}}}};f.prototype.writeFile=function(k,p,w){if(!w){p({errorCode:"BAD_PARAMETER",errorText:"options.path is a mandatory parameter"})}else{if(!g(w.path)){p({errorCode:"BAD_PARAMETER",errorText:"options.path is a is not valid"})}else{if(!w.data){p({errorCode:"BAD_PARAMETER",errorText:"options.data is a mandatory parameter"})}else{if(w.mode&&(w.mode!=="truncate"&&w.mode!=="append"&&w.mode!=="position")){p({errorCode:"BAD_PARAMETER",errorText:"mode should be 'truncate'|'append'|'position'"})}else{if(w.position&&(w.position<0)){p({errorCode:"BAD_PARAMETER",errorText:"position should be > 0"})}else{if(w.offset&&(w.offset<0)){p({errorCode:"BAD_PARAMETER",errorText:"offset should be > 0"})}else{if(w.length&&(w.length>f.MAX_BUFFER_LENGTH||w.length<1)){p({errorCode:"BAD_PARAMETER",errorText:"length should be > 0 and < "+f.MAX_BUFFER_LENGTH})}else{if(w.encoding&&(w.encoding!=="utf8"&&w.encoding!=="binary"&&w.encoding!=="base64")){p({errorCode:"BAD_PARAMETER",errorText:"Invalid encoding: "+w.encoding})}else{e("REQUEST!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");var m={};m.path=w.path;m.mode=w.mode?w.mode:"truncate";m.position=w.position?w.position:0;m.encoding=w.encoding?w.encoding:"utf8";var n=w.offset?w.offset:0;if(m.encoding==="binary"){e("binary, size is: "+w.data.byteLength);var j=new Uint8Array(w.data);e("uint8View: "+j);var h=w.length?w.length:f.MAX_BUFFER_LENGTH;var r=[];var q=0;for(var o=n;o<j.length&&q<h;++o,q++){r[q]=j[o]}e("array length: "+q);m.data=r;m.length=q;m.offset=0}else{if(m.encoding==="base64"){var h=w.length?w.length:f.MAX_BUFFER_LENGTH;e("base64, size is: "+w.data.length);var u=w.data;var v=window.atob(u);var t=v.substring(n,n+h);var s=new Uint8Array(t.length);for(o=0;o<t.length;o++){s[o]=t.charCodeAt(o)}var r=[];for(var o=0;o<s.length;++o){r[o]=s[o]}m.data=r;m.length=r.length;m.offset=0}else{var h=w.length?w.length:f.MAX_BUFFER_LENGTH;m.data=w.data.substring(n,n+h);m.length=m.data.length;m.offset=0}}try{a.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"fs/writeFile",parameters:m,onSuccess:function(i){e("onSuccess!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");if(i.returnValue){k({written:i.written})}else{e("FAILED: "+i.errorText);p({errorCode:i.errorCode,errorText:i.errorText})}},onFailure:function(i){e("onFailure!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");e("FAILED: "+i.errorText);p({errorCode:i.errorCode,errorText:i.errorText})}})}catch(l){e("EXCEPTION!!!!!!!!!!!!!!!!!"+l)}}}}}}}}}};f.prototype.statFile=function(h,i,j){if(!(j&&g(j.path))){i({errorCode:"BAD_PARAMETER",errorText:"options.path is a mandatory parameter"})}else{if(!j.path){i({errorCode:"BAD_PARAMETER",errorText:"options.path is a mandatory parameter"})}else{try{a.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"fs/statFile",parameters:{path:j.path},onSuccess:function(l){e("onSuccess!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");if(l.returnValue){h(l.stat)}else{e("FAILED: "+l.errorText);i({errorCode:l.errorCode,errorText:l.errorText})}},onFailure:function(l){e("onFailure!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");e("FAILED: "+l.errorText);i({errorCode:l.errorCode,errorText:l.errorText})}})}catch(k){e("EXCEPTION!!!!!!!!!!!!!!!!!"+k)}}}};f.prototype.removeAll=function(h,i,j){if(!j){i({errorCode:"BAD_PARAMETER",errorText:"options.device is a mandatory parameter"})}else{if(!j.device){i({errorCode:"BAD_PARAMETER",errorText:"options.device is a mandatory parameter"})}else{try{a.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"fs/removeAll",parameters:{device:j.device},onSuccess:function(l){e("onSuccess!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");if(l.returnValue){h()}else{e("FAILED: "+l.errorText);i({errorCode:l.errorCode,errorText:l.errorText})}},onFailure:function(l){e("onFailure!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");e("FAILED: "+l.errorText);i({errorCode:l.errorCode,errorText:l.errorText})}})}catch(k){e("EXCEPTION!!!!!!!!!!!!!!!!!"+k)}}}};f.prototype.fsync=function(h,i,j){try{var l={};if(j&&j.path){if(g(j.path)){l.path=j.path}else{i({errorCode:"BAD_PARAMETER",errorText:"Invalid File URI"});return}}a.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"fs/fsyncFile",parameters:l,onSuccess:function(m){e("onSuccess!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");if(m.returnValue){h()}else{e("FAILED: "+m.errorText);i({errorCode:m.errorCode,errorText:m.errorText})}},onFailure:function(m){e("onFailure!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");e("FAILED: "+m.errorText);i({errorCode:m.errorCode,errorText:m.errorText})}})}catch(k){e("EXCEPTION!!!!!!!!!!!!!!!!!"+k)}};f.prototype.moveFile=function(h,i,j){if(!j){i({errorCode:"BAD_PARAMETER",errorText:"options.path is a mandatory parameter"})}else{if(!g(j.oldPath)){i({errorCode:"BAD_PARAMETER",errorText:"options.oldpath is a mandatory parameter"})}else{if(!g(j.newPath)){i({errorCode:"BAD_PARAMETER",errorText:"options.newPath is a mandatory parameter"})}else{try{a.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"fs/moveFile",parameters:{oldPath:j.oldPath,newPath:j.newPath},onSuccess:function(l){e("onSuccess!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");if(l.returnValue){h()}else{e("FAILED: "+l.errorText);i({errorCode:l.errorCode,errorText:l.errorText})}},onFailure:function(l){e("onFailure!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");e("FAILED: "+l.errorText);i({errorCode:l.errorCode,errorText:l.errorText})}})}catch(k){e("EXCEPTION!!!!!!!!!!!!!!!!!"+k)}}}}};f.prototype.unzipFile=function(h,i,j){if(!j){i({errorCode:"BAD_PARAMETER",errorText:"options.path is a mandatory parameter"})}else{if(!g(j.zipPath)){i({errorCode:"BAD_PARAMETER",errorText:"options.zipPath is a mandatory parameter"})}else{if(!g(j.targetPath)){i({errorCode:"BAD_PARAMETER",errorText:"options.targetPath is a mandatory parameter"})}else{try{a.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"fs/unzip",parameters:{zipPath:j.zipPath,targetPath:j.targetPath},onSuccess:function(l){e("onSuccess!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");if(l.returnValue){h()}else{e("FAILED: "+l.errorText);i({errorCode:l.errorCode,errorText:l.errorText})}},onFailure:function(l){e("onFailure!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");e("FAILED: "+l.errorText);i({errorCode:l.errorCode,errorText:l.errorText})}})}catch(k){e("EXCEPTION!!!!!!!!!!!!!!!!!"+k)}}}}};d.exports=f});Storage=cordova.require("cordova/plugin/storage");