cordova.define("cordova/plugin/broadcast",function(k,s,c){var t=k("cordova/plugin/webos/service"),q=k("cordova/utils"),m=k("cordova/argscheck");var i=function(u){this.isATSC=false;this.tokenChannelChange=0;this.tokenSignalState=0;this.broadcastDivId=null;this.broadcastElement=null;this.currentInput=null;this.currentSource=null;this.isLastInput=true;this.isLastChannel=true;var v=this;t.Request("luna://com.webos.service.tv.systemproperty",{method:"getSystemInfo",parameters:{keys:["atsc"]},onSuccess:function(w){v.isATSC=w.atsc},onFailure:function(w){}})};i.prototype.onchannelchange=function(u){};i.prototype.onsignalstatuschange=function(u){};i.prototype.initialize=function(u,w,x){m.checkArgs("fFo","broadcastCordova.initialize",arguments);var y=q.clone(x);this.broadcastDivId=document.getElementById(y.divId);y.broadcastPlugin=this;if(y.isLastInput==true||!y.src){this.isLastInput=true;e(u,w,y)}else{this.isLastInput=false;if(y.src.indexOf("tv://")!=-1){if(y.isLastChannel==true){this.isLastChannel=true;y.type="service/webos-broadcast"}else{this.isLastChannel=false;y.type="service/webos-broadcast-standalone"}this.currentInput="tv";this.currentSource=y.src.substr(5)}else{y.type="service/webos-external";var v=y.src.split(":");this.currentInput=v[1].substr(2).toLowerCase();this.currentSource=v[2]}g(y);u&&u()}};i.prototype.channelUp=function(u,v){m.checkArgs("fF","broadcastCordova.channelUp",arguments);var w={broadcastId:this.broadcastElement.mediaId};t.Request("luna://com.webos.service.tv.broadcast",{method:"changeChannelUp",parameters:w,onSuccess:function(x){u&&u()},onFailure:function(x){delete x.returnValue;v&&v(x)}})};i.prototype.channelDown=function(u,v){m.checkArgs("fF","broadcastCordova.channelDown",arguments);var w={broadcastId:this.broadcastElement.mediaId};t.Request("luna://com.webos.service.tv.broadcast",{method:"changeChannelDown",parameters:w,onSuccess:function(x){u&&u()},onFailure:function(x){delete x.returnValue;v&&v(x)}})};i.prototype.setChannel=function(u,v,w){m.checkArgs("fFo","broadcastCordova.setChannel",arguments);var x={broadcastId:this.broadcastElement.mediaId,channelId:w.id};t.Request("luna://com.webos.service.tv.broadcast",{method:"changeChannel",parameters:x,onSuccess:function(y){u&&u()},onFailure:function(y){delete y.returnValue;v&&v(y)}})};i.prototype.getCurrentChannel=function(u,v){m.checkArgs("fF","broadcastCordova.getCurrentChannel",arguments);var w={broadcastId:this.broadcastElement.mediaId,subscribe:false};t.Request("luna://com.webos.service.tv.broadcast",{method:"getCurrentChannel",parameters:w,onSuccess:function(x){var y={};y=l(x.channel,"api");u&&u(y)},onFailure:function(x){delete x.returnValue;v&&v(x)}})};i.prototype.getSignalStatus=function(u,v){m.checkArgs("fF","broadcastCordova.getSignalStatus",arguments);var w;if(this.currentInput=="tv"){w={broadcastId:this.broadcastElement.mediaId,subscribe:false};t.Request("luna://com.webos.service.tv.broadcast",{method:"getChannelState",parameters:w,onSuccess:function(x){var y=x.channelState;y.screensaverType=y.channelScreensaverType;delete y.channelScreensaverType;u&&u(y)},onFailure:function(x){delete x.returnValue;v&&v(x)}})}else{w={externalInputId:this.broadcastElement.mediaId,subscribe:false};t.Request("luna://com.webos.service.tv.externaldevice/input/",{method:"getSignalState",parameters:w,onSuccess:function(x){u&&u(x.signalState)},onFailure:function(x){delete x.returnValue;v&&v(x)}})}};i.prototype.getCurrentProgram=function(u,v,w){m.checkArgs("fFo","broadcastCordova.getCurrentProgram",arguments);t.Request("luna://com.palm.systemservice/time",{method:"getEffectiveBroadcastTime",parameters:{},onSuccess:function(x){var y={};y.id=w.id;y.startTime=x.localtime;y.endTime=x.localtime;y.request="nowInfo";f(u,v,y)},onFailure:function(x){delete x.returnValue;v&&v(x)}})};i.prototype.getNextProgram=function(u,v,w){m.checkArgs("fFo","broadcastCordova.getNextProgram",arguments);t.Request("luna://com.palm.systemservice/time",{method:"getEffectiveBroadcastTime",parameters:{},onSuccess:function(x){var y={};y.id=w.id;y.startTime=x.localtime;y.endTime=x.localtime;y.request="nextInfo";f(u,v,y)},onFailure:function(x){delete x.returnValue;v&&v(x)}})};i.prototype.getProgramCount=function(u,v,w){m.checkArgs("fFo","broadcastCordova.getProgramCount",arguments);var x=q.clone(w);x.request="count";f(u,v,x)};i.prototype.getProgramList=function(u,v,w){m.checkArgs("fFo","broadcastCordova.getProgramList",arguments);var x=q.clone(w);x.request="list";f(u,v,x)};i.prototype.getChannelCount=function(u,v,w){m.checkArgs("fFo","broadcastCordova.getChannelCount",arguments);var x={from:"com.webos.service.tv.channel.dblist:1",select:[""],where:[{prop:"channelType",op:"=",val:w.type}],filter:[{prop:"Invisible",op:"=",val:false}]};t.Request("luna://com.palm.db/",{method:"search",parameters:{query:x},onSuccess:function(y){var z={};z.count=y.results.length;u&&u(z)},onFailure:function(y){delete y.returnValue;v&&v(y)}})};i.prototype.getChannelList=function(u,v,w){m.checkArgs("fFo","broadcastCordova.getChannelList",arguments);var y=w.startIndex-1;if(y<0){y=0}var z=y+w.count;var x={from:"com.webos.service.tv.channel.dblist:1",select:["channelId","channelName","channelMode","channelNumber","channelType","skipped","locked","descrambled","scrambled"],where:[{prop:"channelType",op:"=",val:w.type}],filter:[{prop:"Invisible",op:"=",val:false}],limit:z};t.Request("luna://com.palm.db/",{method:"search",parameters:{query:x},onSuccess:function(A){var D={};D.channel=[];var C=A.results.length-y;if(C>0){for(var B=0;B<C;B++){D.channel[B]=l(A.results[B+y],"db8")}}u&&u(D)},onFailure:function(A){delete A.returnValue;v&&v(A)}})};i.prototype.getChannelListByName=function(u,v,w){m.checkArgs("fFo","broadcastCordova.getChannelListByName",arguments);var x={from:"com.webos.service.tv.channel.dblist:1",select:["channelId","channelName","channelMode","channelNumber","channelType","skipped","locked","descrambled","scrambled"],where:[{prop:"channelName",op:"%",val:w.name}],filter:[{prop:"Invisible",op:"=",val:false}]};if(w.type){x.filter.push({prop:"channelType",op:"=",val:w.type})}t.Request("luna://com.palm.db/",{method:"search",parameters:{query:x},onSuccess:function(y){var A={};A.channel=[];if(y.results.length>0){for(var z=0;z<y.results.length;z++){A.channel[z]=l(y.results[z],"db8")}}u&&u(A)},onFailure:function(y){delete y.returnValue;v&&v(y)}})};i.prototype.setInput=function(v){m.checkArgs("o","broadcastCordova.setInput",arguments);var x=false;if(v.src.indexOf("tv://")!=-1){if(this.isLastChannel==true){v.type="service/webos-broadcast"}else{v.type="service/webos-broadcast-standalone"}this.currentInput="tv";this.currentSource=v.src.substr(5)}else{v.type="service/webos-external";var u=v.src.split(":");this.currentInput=u[1].substr(2).toLowerCase();this.currentSource=u[2]}for(var w=0;w<this.broadcastElement.childNodes.length;w++){if(this.broadcastElement.childNodes[w].nodeName=="SOURCE"){this.broadcastElement.childNodes[w].src=v.src;this.broadcastElement.childNodes[w].type=v.type;this.broadcastElement.load();x=true}}return x};i.prototype.addEventListener=function(w,u,v){if(w=="channelchange"){this.tokenChannelChange=t.Request("luna://com.webos.service.tv.broadcast",{method:"getCurrentChannel",parameters:{broadcastId:this.broadcastElement.mediaId,subscribe:true},onSuccess:function(x){var y=x.channel;u&&u(y)},onFailure:function(x){}})}else{if(w=="signalstatus"){if(this.currentInput=="tv"){this.tokenSignalState=t.Request("luna://com.webos.service.tv.broadcast",{method:"getChannelState",parameters:{broadcastId:this.broadcastElement.mediaId,subscribe:true},onSuccess:function(x){var y=x.channelState;y.screensaverType=y.channelScreensaverType;delete y.channelScreensaverType;u&&u(y)},onFailure:function(x){}})}else{this.tokenSignalState=t.Request("luna://com.webos.service.tv.externaldevice/input/",{method:"getSignalState",parameters:{externalInputId:this.broadcastElement.mediaId,subscribe:true},onSuccess:function(x){var y=x.signalState;u&&u(y)},onFailure:function(x){}})}}}};var h=function(u,v){p(u);if(u.currentInput=="tv"){n(u);d(u)}else{o(u)}v()};var g=function(w){var u=document.createElement("VIDEO");u.setAttribute("id",w.videoId);u.setAttribute("width","100%");u.setAttribute("height","100%");u.setAttribute("autoplay","");u.addEventListener("loadedmetadata",function(){h(w.broadcastPlugin,w.callback)},false);var v=document.createElement("SOURCE");v.setAttribute("src",w.src);v.setAttribute("type",w.type);u.appendChild(v);w.broadcastPlugin.broadcastDivId.appendChild(u);w.broadcastPlugin.broadcastElement=u};var e=function(u,v,w){t.Request("luna://com.webos.service.eim",{method:"getCurrentInput",parameters:{},onSuccess:function(y){if(y.mainInputSourceId=="ATV"||y.mainInputSourceId=="DTV"){w.broadcastPlugin.currentInput="tv";r(u,v,w)}else{var x=y.mainInputSourceId.split("_");w.broadcastPlugin.currentInput=x[0].toLowerCase();w.broadcastPlugin.currentSource=x[1];w.src="ext://"+w.broadcastPlugin.currentInput+":"+w.broadcastPlugin.currentSource;w.type="service/webos-external";g(w);u&&u()}},onFailure:function(x){delete x.returnValue;v&&v(x)}})};var r=function(u,v,w){};var n=function(u){u.tokenChannelChange=t.Request("luna://com.webos.service.tv.broadcast",{method:"getCurrentChannel",parameters:{broadcastId:u.broadcastElement.mediaId,subscribe:true},onSuccess:function(v){u.currentSource=v.channel.channelId;var w={};w=l(v.channel,"api");u.onchannelchange(w)},onFailure:function(v){}})};var d=function(u){u.tokenSignalState=t.Request("luna://com.webos.service.tv.broadcast",{method:"getChannelState",parameters:{broadcastId:u.broadcastElement.mediaId,subscribe:true},onSuccess:function(v){var w=v.channelState;w.screensaverType=w.channelScreensaverType;delete w.channelScreensaverType;u.onsignalstatuschange(w)},onFailure:function(v){}})};var o=function(u){u.tokenSignalState=t.Request("luna://com.webos.service.tv.externaldevice/input/",{method:"getSignalState",parameters:{externalInputId:u.broadcastElement.mediaId,subscribe:true},onSuccess:function(v){var w=v.signalState;u.onsignalstatuschange(w)},onFailure:function(v){}})};var p=function(u){if(u.tokenChannelChange){u.tokenChannelChange.cancel()}if(u.tokenSignalState){u.tokenSignalState.cancel()}};var a=function(u,w,z){var x=b(z.startTime);var v=b(z.endTime);var y={};if(z.request=="count"){y={from:"com.webos.service.tv.programSCH:4",select:[""],where:[{prop:"signalChannelId",op:"=",val:z.signalChannelId}],filter:[{prop:"localStartTime",op:"<=",val:v},{prop:"localEndTime",op:">=",val:x}]}}else{if(z.request=="nextInfo"){y={from:"com.webos.service.tv.programSCH:4",select:["programId","eventId","localStartTime","localEndTime","duration","programName","description"],where:[{prop:"channelId",op:"=",val:z.signalChannelId}],filter:[{prop:"localStartTime",op:">",val:x}],orderBy:"localStartTime",limit:1}}else{if(z.request=="list"||z.request=="nowInfo"){y={from:"com.webos.service.tv.programSCH:4",select:["programId","eventId","localStartTime","localEndTime","duration","programName","description"],where:[{prop:"channelId",op:"=",val:z.signalChannelId}],filter:[{prop:"localStartTime",op:"<=",val:v},{prop:"localEndTime",op:">=",val:x}]}}}}};var f=function(u,v,x){var w={from:"com.webos.service.tv.channel.dblist:1",select:["signalChannelId"],where:[{prop:"channelId",op:"=",val:x.id}]};t.Request("luna://com.palm.db/",{method:"find",parameters:{query:w},onSuccess:function(y){x.signalChannelId=y.results[0].signalChannelId;a(u,v,x)},onFailure:function(y){delete y.returnValue;v&&v(y)}})};var l=function(u,w){var v={};v.id=u.channelId;v.number=u.channelNumber;v.name=u.channelName;if(w=="api"){v.mode=u.channelModeName;v.type=u.channelTypeName;v.isSkipped=u.isSkipped;v.isLocked=u.isLocked;v.isDescrambled=u.isDescrambled;v.isScrambled=u.isScrambled}else{v.mode=u.channelMode;v.type=u.channelType;v.isSkipped=u.skipped;v.isLocked=u.locked;v.isDescrambled=u.descrambled;v.isScrambled=u.scrambled}return v};var b=function(v){var u=v.year+",";u+=((v.month<10)?"0":"")+v.month+",";u+=((v.day<10)?"0":"")+v.day+",";u+=((v.hour<10)?"0":"")+v.hour+",";u+=((v.minute<10)?"0":"")+v.minute+",";u+=((v.second<10)?"0":"")+v.second;return u};var j=function(u){var w=u.split(",");var v={};v.year=+w[0];v.month=+w[1];v.day=+w[2];v.hour=+w[3];v.minute=+w[4];v.second=+w[5];return v};c.exports=i});Broadcast=cordova.require("cordova/plugin/broadcast");cordova.define("cordova/plugin/inputSource",function(b,d,a){function c(k){console.log(k)}var g;if(window.PalmSystem){c("Window.PalmSystem Available");g=b("cordova/plugin/webos/service")}else{g={Request:function(k,l){c(k+" invoked. But I am a dummy because PalmSystem is not available");if(typeof l.onFailure==="function"){l.onFailure({returnValue:false,errorText:"PalmSystem Not Available. Cordova is not installed?"})}}}}var h=function(){};var f=null;function j(l,m,k){if(l.errorCode===undefined||l.errorCode===null){l.errorCode=m}if(l.errorText===undefined||l.errorText===null){l.errorText=k}}h.prototype.initialize=function(l,m,o){c("initialize: "+JSON.stringify(o));if(o.divId===undefined||typeof o.divId!=="string"||o.divId===null||o.divId.length<=0||o.videoId===undefined||typeof o.videoId!=="string"||o.videoId===null||o.videoId.length<=0||o.callback===undefined||typeof o.callback!=="function"||o.src===undefined||typeof o.src!=="string"||o.src===null||o.src.length<=0){if(typeof m==="function"){var k={};j(k,"II","InputSource.initialize returns failure. invalid parameters.");m(k)}return}i(o.src,function p(q){o.src=q;f=new Broadcast();c("initialize: converted "+JSON.stringify(o));f.initialize(l,m,o)},function n(r){c("initialize: failure "+JSON.stringify(r));if(typeof m==="function"){var q={};j(q,"II","InputSource.initialize returns failure. invalid parameters.");m(q)}});c("initialize: Done")};h.prototype.changeInputSource=function(l,m,o){if(o.src===undefined||typeof o.src!=="string"||o.src===null||o.src.length<=0){if(typeof m==="function"){var k={};j(k,"ICIS","InputSource.changeInputSource returns failure. invalid argument. ");m(k)}return}c("changeInputSource: "+JSON.stringify(o));i(o.src,function p(r){o.src=r;if(f.setInput(o)){c("changeInputSource: On Success");l()}else{var q={};c("changeInputSource: On Failure");j(q,"ICIS","InputSource.changeInputSource returns failure.");m(q)}},function n(r){c("changeInputSource: failure "+JSON.stringify(r));if(typeof m==="function"){var q={};j(q,"ICIS","InputSource.changeInputSource returns failure. invalid argument. ");m(q)}});c("changeInputSource: Done")};h.prototype.getInputSourceStatus=function(k,l){c("getInputSourceStatus: ");g.Request("luna://com.webos.service.eim/",{method:"getAllInputStatus",onSuccess:function(n){c("getInputSourceStatus: On Success");if(n.returnValue===true){if(k&&typeof k==="function"){var q={};var p=new Array(n.totalCount);var r=new Array(n.totalCount);for(var o=0;o<p.length;o++){p[o]={};p[o].inputPort=e(n.devices[o].label);var m=n.devices[o].id.split("_");p[o].inputPort="ext://"+m[0].toLowerCase()+":"+m[1];if(p[o].inputPort==="ext://hdmi:3"){p[o].inputPort="ext://dp:1"}else{if(p[o].inputPort==="ext://hdmi:4"){p[o].inputPort="ext://dvi:1"}}r[o]={};r[o].inputPort=p[o].inputPort;r[o].id=n.devices[o].id}q.inputSourceList=p;g.Request("luna://com.webos.service.eim/",{method:"getCurrentInput",parameters:{},onSuccess:function(s){c("InputSource.getInputSourceStatus: On Success 3");if(s.returnValue===true){if(k&&typeof k==="function"){q.currentInputSource={};for(var t=0;t<r.length;t++){if(r[t].id===s.mainInputSourceId){q.currentInputSource=r[t].inputPort;break}}q.currentSignalState="unknown";if(f!==null){c("InputSource.getInputSourceStatus : broadcast is not null");f.getSignalStatus(function u(w){q.currentSignalState=w.videoSignalState;c("InputSource.getInputSourceStatus: On Success 2");if(k&&typeof k==="function"){c("getInputSourceStatus: On Success"+JSON.stringify(q));k(q);return}},function v(){c("InputSource.getInputSourceStatus : signal state is fail.");if(k&&typeof k==="function"){c("getInputSourceStatus: On Success"+JSON.stringify(q));k(q);return}})}else{c("InputSource.getInputSourceStatus : it does not initialize.");if(k&&typeof k==="function"){c("getInputSourceStatus: On Success"+JSON.stringify(q));k(q);return}}}}},onFailure:function(s){c("InputSource.getInputSourceStatus: On Failure 2");delete s.returnValue;if(l&&typeof l==="function"){j(s,"IGISS","InputSource.getInputSourceStatus returns failure.");l(s);return}}})}}},onFailure:function(m){c("getInputSourceStatus: On Failure");delete m.returnValue;if(l&&typeof l==="function"){j(m,"IGISS","InputSource.changeInputSource returns failure on gathering input list.");l(m)}}});c("InputSource.getInputSourceStatus Done")};function e(m){var k=1;var l=m.length;if(!isNaN(parseInt(m.charAt(l-1),10))){k=m.charAt(l-1);l--}m=m.substring(0,l)+":"+k;m="ext://"+m.toLowerCase();return m}function i(m,k,l){g.Request("luna://com.webos.service.eim/",{method:"getAllInputStatus",onSuccess:function(o){c("convertInputSource: On Success "+m);if(o.returnValue===true){if(k&&typeof k==="function"){var r=new Array(o.totalCount);c("convertInputSource: "+JSON.stringify(o.totalCount));c("convertInputSource: "+JSON.stringify(o.devices));if(m==="ext://dp:1"){m="ext://hdmi:3"}else{if(m==="ext://dvi:1"){m="ext://hdmi:4"}}for(var q=0;q<r.length;q++){r[q]={};r[q].inputPort=e(o.devices[q].label);var n=o.devices[q].id.split("_");r[q].id="ext://"+n[0].toLowerCase()+":"+n[1];if(m===r[q].id){c("convertInputSource: On Success ok "+m);k(m);return}}for(var p=0;p<r.length;p++){if(m===r[p].inputPort){m=r[p].id;c("convertInputSource: On Success converted "+m);k(m);return}}}}},onFailure:function(n){c("convertInputSource: On Failure");delete n.returnValue;if(l&&typeof l==="function"){j(n,"IGISS","convertInputSource returns failure on gathering input list.");l(n)}}})}a.exports=h});InputSource=cordova.require("cordova/plugin/inputSource");